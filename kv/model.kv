#:import CachedAsyncImage tesseractXplore.widgets.CachedAsyncImage


<ModelScreen>:
    name: 'model'
    FloatLayout:
        id: layout
        # Right-click context menu for images
        StarredModelContextMenu:
            id: context_menu
            cancel_handler_widget: layout
        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                # Model selection: search, history, etc.
                MDTabs:
                    id: model_selection_tabs
                    #background_color: app.theme_cls.primary_color
                    size_hint_x: .4
                    size_hint_min_x: dp(500)
                    size_hint_max_x: dp(700)
                    ModelSearchTab:
                        id: search_tab
                    #ModelSearchResultsTab:
                    #    id: search_results_tab
                    #ModelHistoryTab:
                    #    id: history_tab
                    #FrequentTaxaTab:
                    #    id: frequent_tab
                    #UserTaxaTab:
                    #    id: user_tab
                    #StarredTaxaTab:
                    #    id: starred_tab

                # Info display for selected model
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: dp(20)
                    md_bg_color: app.theme_cls.bg_dark
                  # MDBoxLayout:
                  #     orientation: 'vertical'
                  #     spacing: dp(10)
                  #     size_hint_max_x: dp(50)
                  #     CachedAsyncImage:
                  #         id: selected_model_photo
                  #         size_hint_max_y: dp(50)
                  #         source: PLACEHOLDER_ICON
                    SectionHeader:
                        id: model_header
                        text: 'Model'
                        tooltip_text: 'Type to browse model best, fast'

                    TwoLineListItem:
                        id: basic_info
                        text: ''
                        secondary_text: ''

                    SectionHeader:
                        text: 'Information'
                        tooltip_text: 'Type to browse model best, fast'

                    TwoLineListItem:
                        text: 'Description'
                        id: info_description
                        secondary_text: ''

                    TwoLineListItem:
                        text: 'Category'
                        id: info_category
                        secondary_text: ''


                    OneLineListItem:
                        text: 'Tags'
                    MDBoxLayout:
                        size_hint_max_x:  dp(500)
                        orientation: 'vertical'
                        ScrollViewY:
                            MDList:
                                id: info_tags



               #    TwoLineListItem:
               #        text: 'Supported Fonts'
               #        id: info_fonts
               #        secondary_text: ''

               #    TwoLineListItem:
               #        text: 'Based on dataset'
               #        id: info_dataset
               #        secondary_text: ''

                    SectionHeader:
                        text: 'Download settings'
                        tooltip_text: 'Download settings'

                    MDTextField:
                        adaptive_size: True
                        #pos_hint: {"center_y": .5}
                        size_hint: 1, None
                        #width: dp(400)
                        height: dp(40)
                        id: tessdatadir
                        hint_text: 'Tessdata'

                    MDTextField:
                        adaptive_size: True
                        pos_hint_x: 10
                        size_hint: 1, None
                        #width: int(self.width/2)
                        height: dp(40)
                        id: filename
                        hint_text: 'Filename'


                    MDBoxLayout:
                        adaptive_size: True
                        #pos_hint: {"center_x": .1, "center_y": .5}

                        MyToggleButton:
                            id: best_toggle
                            text: "Best"
                            allow_no_selection: False
                            group: "Category"
                        MyToggleButton:
                            id: fast_toggle
                            text: "Fast"
                            state: 'down'
                            allow_no_selection: False
                            group: "Category"

                    LinksSection:
                        id: model_links


            StatusBar:
                id: status_bar

# Model links
<LinksSection@MDBoxLayout>:
    #size_hint_max_y: dp(50)
    spacing: dp(10)
    TooltipIconButton:
        id: download_button
        icon: 'arrow-down-circle-outline'
        text: 'Download'
        width: dp(300)
        disabled: True

