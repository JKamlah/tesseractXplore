# Layout for taxon search & search results

# Taxon search tab
<TaxonSearchTab@Tab>:
    text: 'magnify'
    # tooltip_text: 'Search'
    orientation: 'vertical'
    padding: dp(20)
    TabHeader:
        text: 'Search'
    IntField:
        id: taxon_id_input
        hint_text: 'Taxon ID'
        helper_text: 'Enter an iNaturalist taxon ID'
    TaxonAutocompleteSearch:
        id: taxon_search_input
    SectionHeader:
        text: 'Categories'
        tooltip_text: 'Iconic taxa categories to browse or filter searches with'
    IconicTaxaLayout:
        id: iconic_taxa
    SectionHeader:
        text: 'Rank'
    MDGridLayout:
        cols: 2
        InputLabel:
            text: 'Exact'
        MDTextField:
            id: exact_rank_input
            readonly: True
            hint_text: 'Exact rank'
        InputLabel:
            text: 'Minimum'
        MDTextField:
            id: min_rank_input
            hint_text: 'Min rank'
        InputLabel:
            text: 'Maximum'
        MDTextField:
            id: max_rank_input
            hint_text: 'Max rank'
    MDBoxLayout:
        spacing: dp(10)
        TooltipIconButton:
            id: taxon_search_button
            icon: 'magnify'
            text: 'Search'
            width: dp(220)
        TooltipIconButton:
            id: reset_search_button
            icon: 'restart'
            text: 'Reset Filters'
            width: dp(220)
    # Temp spacer
    MDBoxLayout:
        height: 300

# Taxon search results tab
<TaxonSearchResultsTab@Tab>:
    text: 'layers-search'
    # tooltip_text: 'Search'
    orientation: 'vertical'
    padding: dp(20)
    TabHeader:
        text: 'Search Results'
    ScrollViewY:
        MDList:
            id: search_results_list

# Autocomplete search layout with input + dropdown
<TaxonAutocompleteSearch>:
    input: input
    dropdown: dropdown
    size_hint_x: 1
    SearchInput:
        id: input
        hint_text: 'Taxon Name'
        helper_text: 'Enter a scientific or common name'
        helper_text_mode: 'on_focus'
#        icon_right: 'close-circle-outline'  # TODO: Is there an event for this to bind to?
    AutocompleteDropdown:
        id: dropdown

 # Iconic taxa 'Categories' selector
<IconicTaxaLayout@MDGridLayout>:
    adaptive_size: True
    md_bg_color: app.theme_cls.bg_dark
    cols: 6
    padding: dp(10), dp(10)
    spacing: dp(20)
    row_default_height: dp(40)
    row_force_default: True
    col_default_width: dp(40)
    col_force_default: True
