#:kivy 1.11
#:import ASSETS_DIR naturtag.ui.ASSETS_DIR
#:import IMAGE_FILETYPES naturtag.ui.IMAGE_FILETYPES
#:import version naturtag.__version__

<MDIntField@MDTextField>:
	input_filter: 'int'
	helper_text_mode: 'on_focus'

<ImageScrollView@ScrollView>:
    do_scroll_x: False
    do_scroll_y: True
    effect_cls: 'OpacityScrollEffect'
    scroll_type: ['bars', 'content']
    scroll_wheel_distance: 40
    size: self.size
    bar_width: 10


# Main layout and nav drawer
<Controller>:
	orientation: 'vertical'
	md_bg_color: app.theme_cls.primary_color
	adaptive_size: True

    # Toolbar with buttons
	MDToolbar:
		id: toolbar
		size_hint_max_y: 100

    # Main view populated with currently selected screen
	NavigationLayout:
		title: app.title
		md_bg_color: app.theme_cls.primary_color
		x: toolbar.height

		ScreenManager:
			id: screen_manager

		MDNavigationDrawer:
			id: nav_drawer
			ContentNavigationDrawer:


# Main nav drawer
<ContentNavigationDrawer@BoxLayout>:
	BoxLayout:
		orientation: 'vertical'
		FloatLayout:
			size_hint_y: None
			height: '310dp'
			canvas:
				Color:
					rgba: app.theme_cls.bg_normal
				Rectangle:
					pos: self.pos
					size: self.size

			BoxLayout:
				id: top_box
				size_hint_y: None
				height: '300dp'
				x: root.parent.x
				pos_hint: {'top': 1}
				FitImage:
					source: f'{ASSETS_DIR}inat-image-tagger-logo.png'

			MDIconButton:
				icon: 'close'
				x: root.parent.x + dp(10)
				pos_hint: {'top': 1}
				on_release: app.close_nav()

			MDLabel:
				markup: True
				text: f'[b]iNaturalist Image Tagger[/b] Version: {version}'
				x: root.parent.x + dp(10)
				y: root.height - top_box.height
				size_hint_y: None
				height: self.texture_size[1]

		ScrollView:
			MDList:
				OneLineIconListItem:
					text: 'Image Selector'
					on_press:
						app.switch_screen('image_selector')
					IconLeftWidget:
						icon: 'home'
				OneLineIconListItem:
					text: 'Settings'
					on_press:
						app.switch_screen('settings')
					IconLeftWidget:
						icon: 'settings'
				OneLineIconListItem:
					text: 'Exit'
					on_press:
						app.stop()
					IconLeftWidget:
						icon: 'exit-to-app'
